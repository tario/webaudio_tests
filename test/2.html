<!DOCTYPE html>
<html>
<head>
  <title>Single osc slow start and stop (fade) </title>

  <script>
    var ac = new AudioContext();
    var gain = ac.createGain(0.0);
    var osc = ac.createOscillator();

    gain.gain.value = 0.0;
    osc.frequency.value = 440;
    osc.type = "square"
    
    gain.connect(ac.destination);
    osc.connect(gain);
    osc.start(0);

    var playing = false;

    window.startStop = function() {
      var newValue = playing ? 0.0 : 1.0;
      gain.gain.setTargetAtTime(newValue, ac.currentTime, 0.5);

      playing = !playing;
    };

  </script>
</head>
<body>
<p>
<button onclick="startStop()">Start/Stop</button>
</p>
</body>
</html>

